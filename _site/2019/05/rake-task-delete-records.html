<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>John Cordero ☺️</title>
  <meta name="description" content="Have sensitive data? Need to purge or remove some tables from all sensitive data? Try a custom rake task!">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Mono|Roboto:300,400,900,400italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="/2019/05/rake-task-delete-records.html">
<script src="http://127.0.0.1:35729/livereload.js"></script></head>

  <body>
    <main class="u-container">
      <div class="c-page">
  <header class="c-page__header">
	<img id="avatar" class="3x" src="/assets/avatar.png"/>
  <h1><code>Hi. Im John Cordero.</code></h1>
  
  <p>
    <a href="/">Home</a><span
          class="u-separate"></span> <a href="/projects/">Projects</a><span class="u-separate"></span>
          <a href="https://www.spillthebean.org/dev-overview/john-cordero">About</a>
</header>
  <div class="c-page__main">
    <article class="c-article">
  <header class="c-article__header">
    <h1 class="c-article__title">Rake Task - Delete Records</h1>
    <p class="c-article__time"><time datetime="2019-05-02T00:00:00-07:00" itemprop="datePublished">May 2</time></p>
  </header>
  <!-- Post Tags -->
  <ul class="c-tags">
    
  </ul>
  <div class="c-article__main">
    <p>Have sensitive data? Need to purge or remove some tables from all sensitive data? Try a custom rake task!</p>

<p>If you don’t know much about rake you can read a nice basic guide <a href="http://www.virtuouscode.com/2014/04/21/rake-part-1-basics/">here</a></p>

<p>We at <a href="http://www.myevolutiontravel.com/">@Evolution </a> utitlize a lot of different forms that save information like personal data, money, credit card forms, client information, etc. So instead of manuall writing queries to production or hacking the postgres db, try removing them safely like we do.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#/lib/delete_records.rb</span>

<span class="n">namespace</span> <span class="ss">:cc</span>
<span class="n">desc</span> <span class="s2">"Delete creditcardforms after 6 months"</span>
	<span class="n">task</span> <span class="ss">:remove_old</span> <span class="o">=&gt;</span> <span class="n">enviorment</span> <span class="k">do</span>
	<span class="no">Model</span><span class="p">.</span><span class="nf">delete_all</span> <span class="p">[</span><span class="s2">"created_at &lt; ?"</span><span class="p">,</span> <span class="mi">6</span><span class="p">.</span><span class="nf">months</span><span class="p">.</span><span class="nf">ago</span><span class="p">]</span>
	 <span class="nb">puts</span> <span class="s2">" ...done"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

  </div>
  <!-- Previous / Next Buttons -->
<!--   <div class="pagenav">
    
    
    <div class="wrapper" id="right">
      <small>May 7 <b>Next</b></small>
      <br>
      <a class="no-hov" href="//2019/05/scaffold-a-new-rails-5-api.html">Scaffold a New Rails 5 API. &raquo;</a>
    </div>
    
  </div> -->
  <!-- Disqus comments view -->
  
</article>

  </div>
  <footer class="c-page__footer">
  <p>&copy; John Cordero 2020</p>
  <p><a href="https://linkedin.com/in/">Linkedin</a><span class="u-separate"></span><a href="https://github.com/johncorderox">Github</a></p>
</footer>

</div>

    </main>
    
  </body>
</html>
<style>
#avatar {
  display: inline-block;
  width: 95px;
  height: 95px;
  border-radius: 50%;
  margin-bottom: 20px;
}

</style>
